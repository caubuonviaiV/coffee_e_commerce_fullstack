import{av as nt,a6 as ct,m as D,s as at,ag as rt,aw as it,a7 as L,ax as J,an as lt,$ as ut,a0 as dt,y as ht,ao as ft,ay as mt,h as _t,E as N,o as E,f as O,b as a,F as z,G as At,t as R,d as b,e as gt,a as v,w as P,C as W,r as vt}from"./app-Bm5g5IQi.js";import{u as pt}from"./index-D8ehHb0j.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let M;const Q=t=>M=t,yt=Symbol();function F(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var V;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(V||(V={}));const X=()=>{};function G(t,o,e,s=X){t.push(o);const u=()=>{const d=t.indexOf(o);d>-1&&(t.splice(d,1),s())};return!e&&ut()&&dt(u),u}function x(t,...o){t.slice().forEach(e=>{e(...o)})}const bt=t=>t();function H(t,o){t instanceof Map&&o instanceof Map&&o.forEach((e,s)=>t.set(s,e)),t instanceof Set&&o instanceof Set&&o.forEach(t.add,t);for(const e in o){if(!o.hasOwnProperty(e))continue;const s=o[e],u=t[e];F(u)&&F(s)&&t.hasOwnProperty(e)&&!L(s)&&!J(s)?t[e]=H(u,s):t[e]=s}return t}const Ct=Symbol();function St(t){return!F(t)||!t.hasOwnProperty(Ct)}const{assign:g}=Object;function wt(t){return!!(L(t)&&t.effect)}function xt(t,o,e,s){const{state:u,actions:d,getters:l}=o,n=e.state.value[t];let p;function r(){n||(e.state.value[t]=u?u():{});const h=ft(e.state.value[t]);return g(h,d,Object.keys(l||{}).reduce((m,C)=>(m[C]=mt(_t(()=>{Q(e);const S=e._s.get(t);return l[C].call(S,S)})),m),{}))}return p=K(t,r,o,e,s,!0),p}function K(t,o,e={},s,u,d){let l;const n=g({actions:{}},e),p={deep:!0};let r,h,m=[],C=[],S;const w=s.state.value[t];!d&&!w&&(s.state.value[t]={}),D({});let q;function T(i){let c;r=h=!1,typeof i=="function"?(i(s.state.value[t]),c={type:V.patchFunction,storeId:t,events:S}):(H(s.state.value[t],i),c={type:V.patchObject,payload:i,storeId:t,events:S});const A=q=Symbol();ht().then(()=>{q===A&&(r=!0)}),h=!0,x(m,c,s.state.value[t])}const Y=d?function(){const{state:c}=e,A=c?c():{};this.$patch(y=>{g(y,A)})}:X;function Z(){l.stop(),m=[],C=[],s._s.delete(t)}function tt(i,c){return function(){Q(s);const A=Array.from(arguments),y=[],B=[];function st(f){y.push(f)}function ot(f){B.push(f)}x(C,{args:A,name:i,store:_,after:st,onError:ot});let I;try{I=c.apply(this&&this.$id===t?this:_,A)}catch(f){throw x(B,f),f}return I instanceof Promise?I.then(f=>(x(y,f),f)).catch(f=>(x(B,f),Promise.reject(f))):(x(y,I),I)}}const et={_p:s,$id:t,$onAction:G.bind(null,C),$patch:T,$reset:Y,$subscribe(i,c={}){const A=G(m,i,c.detached,()=>y()),y=l.run(()=>at(()=>s.state.value[t],B=>{(c.flush==="sync"?h:r)&&i({storeId:t,type:V.direct,events:S},B)},g({},p,c)));return A},$dispose:Z},_=rt(et);s._s.set(t,_);const $=(s._a&&s._a.runWithContext||bt)(()=>s._e.run(()=>(l=it()).run(o)));for(const i in $){const c=$[i];if(L(c)&&!wt(c)||J(c))d||(w&&St(c)&&(L(c)?c.value=w[i]:H(c,w[i])),s.state.value[t][i]=c);else if(typeof c=="function"){const A=tt(i,c);$[i]=A,n.actions[i]=c}}return g(_,$),g(lt(_),$),Object.defineProperty(_,"$state",{get:()=>s.state.value[t],set:i=>{T(c=>{g(c,i)})}}),s._p.forEach(i=>{g(_,l.run(()=>i({store:_,app:s._a,pinia:s,options:n})))}),w&&d&&e.hydrate&&e.hydrate(_.$state,w),r=!0,h=!0,_}function kt(t,o,e){let s,u;const d=typeof o=="function";s=t,u=d?e:o;function l(n,p){const r=nt();return n=n||(r?ct(yt,null):null),n&&Q(n),n=M,n._s.has(s)||(d?K(s,o,u,n):xt(s,u,n)),n._s.get(s)}return l.$id=s,l}const k=pt(),Et=kt("cart",{id:"cart",state:()=>({cart:JSON.parse(localStorage.getItem("cart")||"[]"),discount:null,discountCode:null,discountValue:0}),actions:{addToCart(t){const o=this.cart.find(e=>e.id===t.id);o?(o.quantity++,k.success("Đã thêm sản phẩm vào giỏ hàng!",{timeout:2e3})):(this.cart.push({...t,quantity:1}),k.success("Đã thêm sản phẩm vào giỏ hàng!",{timeout:2e3})),this.saveCart()},addToCart_quantity(t,o){const e=this.cart.find(s=>s.id===t.id);e?e.quantity+=o:this.cart.push({...t,quantity:o}),this.saveCart()},removeFromCart(t){this.cart=this.cart.filter(o=>o.id!==t),this.saveCart(),k.success("Đã loại sản phẩm ra giỏ hàng!",{timeout:2e3})},updateQuantity(t,o){const e=this.cart.find(s=>s.id===t);e&&(e.quantity=o,e.quantity<=0?(this.removeFromCart(t),k.success("Đã loại sản phẩm ra giỏ hàng!",{timeout:2e3})):(this.saveCart(),k.success("Đã cập nhật sản phẩm ra giỏ hàng!",{timeout:2e3})))},saveCart(){localStorage.setItem("cart",JSON.stringify(this.cart))},loadCart(){this.cart=JSON.parse(localStorage.getItem("cart")||"[]")},async applyDiscount(t){try{const e=(await axios.post("/api/discounts/apply",{code:t})).data.discount;this.discount=e,this.discountCode=t,e.condition===1?this.discountValue=e.amount:e.condition===2&&(this.discountValue=this.cartTotal*e.amount/100),localStorage.setItem("discount",JSON.stringify({code:this.discountCode,discount:this.discount,discountValue:this.discountValue})),k.success("Áp dụng mã giảm giá thành công!",{timeout:2e3})}catch(o){throw o}},clearCart(){this.cart=[],localStorage.removeItem("cart")},clearDiscount(){this.discount=null,this.discountCode=null,this.discountValue=0,localStorage.removeItem("discount")},loadDiscount(){const t=JSON.parse(localStorage.getItem("discount"));t&&(this.discount=t.discount,this.discountCode=t.code,this.discountValue=t.discountValue)}},getters:{cartTotal:t=>t.cart.reduce((o,e)=>o+e.price*e.quantity,0),finalTotal:t=>t.cartTotal-t.discountAmount}}),Ot={setup(){const t=Et(),o=D(""),e=D(""),s=(r,h)=>{t.updateQuantity(r,h)},u=r=>{const h=t.cart.find(m=>m.id===r);h&&t.updateQuantity(r,h.quantity+1)},d=r=>{const h=t.cart.find(m=>m.id===r);h&&h.quantity>1&&t.updateQuantity(r,h.quantity-1)},l=r=>{t.removeFromCart(r)},n=()=>{e.value="",t.applyDiscount(o.value).then(()=>{console.log("successfully.")}).catch(r=>{e.value=r.response.data.error})};return t.loadDiscount(),{cartStore:t,discountCode:o,discountError:e,updateQuantity:s,incrementQuantity:u,decrementQuantity:d,removeFromCart:l,applyDiscountCode:n,formatCurrency:r=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(r)}}},$t={class:"dropdown-menu"},Bt=["src"],It=["onClick"],Pt=a("i",{class:"icon_trash_alt"},null,-1),Vt=[Pt],Nt={class:"total_drop"},Rt={class:"clearfix add_bottom_15"};function Lt(t,o,e,s,u,d){const l=N("router-link");return E(),O("div",$t,[a("ul",null,[(E(!0),O(z,null,At(s.cartStore.cart,n=>(E(),O("li",{key:n.id},[a("figure",null,[a("img",{src:n.image,width:"50",height:"50",class:"lazy"},null,8,Bt)]),a("strong",null,[a("span",null,R(n.quantity)+"x "+R(n.name),1),b(R(s.formatCurrency(n.price)),1)]),a("a",{href:"#0",onClick:gt(p=>s.removeFromCart(n.id),["prevent"]),class:"action"},Vt,8,It)]))),128))]),a("div",Nt,[a("div",Rt,[a("strong",null,[b("Tổng: "),a("span",null,R(s.formatCurrency(s.cartStore.cartTotal)),1)])]),v(l,{to:{name:"Cart"},class:"btn_1 outline"},{default:P(()=>[b("Xem giỏ hàng")]),_:1}),v(l,{to:{name:"Transaction"},class:"btn_1"},{default:P(()=>[b("Thanh toán")]),_:1})])])}const jt=j(Ot,[["render",Lt]]),U="/build/assets/logo-Bsxbd_a_.svg",Dt="/build/assets/logo_sticky-KkRbGSnE.svg",Ft={name:"Layout",components:{Cart:jt}},Ht={class:"header clearfix element_to_stick"},Qt=a("div",{class:"layer"},null,-1),qt={class:"container-fluid"},Tt=a("div",{id:"logo"},[a("a",{href:"index.html"},[a("img",{src:U,width:"140",height:"35",alt:"",class:"logo_normal"}),a("img",{src:Dt,width:"140",height:"35",alt:"",class:"logo_sticky"})])],-1),Gt={class:"main-menu"},Jt=W('<div id="header_menu"><a href="#0" class="open_close"><i class="icon_close"></i><span>Menu</span></a><a href="/"><img src="'+U+'" width="140" height="35" alt=""></a></div>',1),zt={class:"submenu"},Wt={class:"submenu"},Mt={class:"submenu"};function Xt(t,o,e,s,u,d){const l=N("Cart"),n=N("router-link");return E(),O("header",Ht,[Qt,a("div",qt,[Tt,v(l),a("nav",Gt,[Jt,a("ul",null,[a("li",zt,[v(n,{to:{name:"Home"},class:"show-submenu",style:{"text-decoration":"none"}},{default:P(()=>[b("Trang chủ")]),_:1})]),a("li",Wt,[v(n,{to:{name:"Menu"},class:"show-submenu",style:{"text-decoration":"none"}},{default:P(()=>[b("Thực đơn")]),_:1})]),a("li",Mt,[v(n,{to:{name:"Blog"},class:"show-submenu",style:{"text-decoration":"none"}},{default:P(()=>[b("Blog")]),_:1})])])])])])}const Kt=j(Ft,[["render",Xt]]),Ut={},Yt=W('<div class="frame black"></div><div class="container"><div class="row"><div class="col-xl-4 col-lg-6 col-md-6 col-sm-6"><div class="footer_wp"><i class="icon_pin_alt"></i><h3>Địa chỉ</h3><p>Hoà Xuân<br>Đà Nẵng - VN</p></div></div><div class="col-xl-4 col-lg-6 col-md-6 col-sm-6"><div class="footer_wp"><i class="icon_tag_alt"></i><h3>Đặt chỗ</h3><p><a href="tel:009442323221">+037030702</a><br><a href="#0">reservations@trung.com</a></p></div></div><div class="col-xl-4 col-lg-6 col-md-6 col-sm-6"><div class="footer_wp"><i class="icon_clock_alt"></i><h3>Giờ mở cửa</h3><ul><li>Thứ Hai - Thứ Bảy: 7h - 22h</li><li>Chủ Nhật: Đóng cửa</li></ul></div></div></div><hr><div class="row"><div class="col-sm-5"><p class="copy">© 2024 web - All rights not reserved</p></div><div class="col-sm-7"><div class="follow_us"><ul><li><a href="#0"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="../../img/twitter_icon.svg" alt="" class="lazy"></a></li><li><a href="#0"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="../../img/facebook_icon.svg" alt="" class="lazy"></a></li><li><a href="#0"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="../../img/instagram_icon.svg" alt="" class="lazy"></a></li><li><a href="#0"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" data-src="../../img/youtube_icon.svg" alt="" class="lazy"></a></li></ul></div></div></div><p class="text-center"></p></div>',2),Zt=[Yt];function te(t,o){return E(),O("footer",null,Zt)}const ee=j(Ut,[["render",te]]),se={name:"Layout",components:{Header:Kt,Footer:ee}};function oe(t,o,e,s,u,d){const l=N("Header"),n=N("Footer");return E(),O(z,null,[v(l),a("main",null,[vt(t.$slots,"content")]),v(n)],64)}const ie=j(se,[["render",oe]]);export{ie as L,Et as u};
