import{L as k}from"./Index-BfhsCJ__.js";import{D as f,E as u,o as l,c as C,w as c,b as t,f as n,G as m,a as r,t as a,d,F as p,e as w,Y as b,_ as x}from"./app-Bm5g5IQi.js";import{P as B}from"./vuejs-paginate-next.es-CcEyBOmj.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as v,v as L}from"./vi-Dnq-qZtZ.js";import"./index-D8ehHb0j.js";/* empty css            */const M={name:"Blog",components:{Layout:k,Paginate:B},data(){return{posts:[],latestPosts:[],categories:[],currentPage:1,perPage:4,selectedCategory:null}},computed:{pageCount(){return Math.ceil(this.posts.length/this.perPage)},paginatedPosts(){const s=(this.currentPage-1)*this.perPage,o=s+this.perPage;return this.posts.slice(s,o)}},created(){this.fetchPosts(),this.fetchLatestPosts()},methods:{fetchPosts(){const s=this.selectedCategory?{category:this.selectedCategory}:{};f.get("/api/blog/posts",{params:s}).then(o=>{this.posts=o.data.posts,this.categories=o.data.categories,this.currentPage=1}).catch(o=>{console.error("Error fetching blog posts:",o)})},handlePageClick(s){this.currentPage=s},fetchLatestPosts(){f.get("/api/blog/latest").then(s=>{this.latestPosts=s.data.slice(0,3)}).catch(s=>{console.error("Error fetching latest posts:",s)})},filterByCategory(s){this.selectedCategory=s,this.fetchPosts()},formatDate(s){return v(new Date(s),"dd 'tháng' MM 'năm' yyyy",{locale:L})},formatDateCat(s){return v(new Date(s),"dd.MM.yyyy")}}},g=s=>(b("data-v-9df50574"),s=s(),x(),s),I={class:"container margin_60_40",style:{"margin-top":"5em"}},V={class:"row"},E={class:"col-lg-9"},S={class:"row"},N={class:"blog"},A=["src"],F=g(()=>t("div",{class:"preview"},[t("span",null,"Xem thêm")],-1)),T={class:"post_info"},j=g(()=>t("div",{class:"thumb"},[t("img",{src:"img/avatar.jpg",alt:"Admin Avatar"})],-1)),G=g(()=>t("li",null,[t("i",{class:"icon_comment_alt"}),d(" 44 ")],-1)),U={class:"pagination-container"},X={class:"col-lg-3"},Y={class:"widget"},q=g(()=>t("div",{class:"widget-title first"},[t("h4",null,"Bài đăng Mới nhất")],-1)),z={class:"comments-list"},H={class:"alignleft"},J=["src"],K={class:"widget"},O=g(()=>t("div",{class:"widget-title"},[t("h4",null,"Thể loại")],-1)),Q={class:"cats"},R=["onClick"];function W(s,o,Z,$,_,i){const h=u("router-link"),y=u("Paginate"),P=u("Layout");return l(),C(P,null,{content:c(()=>[t("div",I,[t("div",V,[t("div",E,[t("div",S,[(l(!0),n(p,null,m(i.paginatedPosts,e=>(l(),n("div",{key:e.id,class:"col-md-6"},[t("article",N,[t("figure",null,[r(h,{to:"/blog/posts/"+e.id},{default:c(()=>[t("img",{src:e.image,alt:"Post Image"},null,8,A),F]),_:2},1032,["to"])]),t("div",T,[t("small",null,a(e.category.name)+" - "+a(i.formatDate(e.created_at)),1),t("h2",null,[r(h,{to:"/blog/posts/"+e.id},{default:c(()=>[d(a(e.title),1)]),_:2},1032,["to"])]),t("p",null,a(e.description),1),t("ul",null,[t("li",null,[j,d(" "+a(e.user.name),1)]),G])])])]))),128)),t("div",U,[r(y,{modelValue:_.currentPage,"onUpdate:modelValue":o[0]||(o[0]=e=>_.currentPage=e),"page-count":i.pageCount,"click-handler":i.handlePageClick,"container-class":"pagination","page-class":"page-item","page-link-class":"page-link","prev-text":"«","next-text":"»"},null,8,["modelValue","page-count","click-handler"])])])]),t("aside",X,[t("div",Y,[q,t("ul",z,[(l(!0),n(p,null,m(_.latestPosts,e=>(l(),n("li",{key:e.id},[t("div",H,[r(h,{to:"/blog/posts/"+e.id},{default:c(()=>[t("img",{src:e.image,alt:"Latest Post Image"},null,8,J)]),_:2},1032,["to"])]),t("small",null,a(e.category.name)+" - "+a(i.formatDateCat(e.created_at)),1),t("h3",null,[r(h,{to:"/blog/posts/"+e.id},{default:c(()=>[d(a(e.title),1)]),_:2},1032,["to"])])]))),128))])]),t("div",K,[O,t("ul",Q,[(l(!0),n(p,null,m(_.categories,e=>(l(),n("li",{key:e.id},[t("a",{href:"#",onClick:w(tt=>i.filterByCategory(e.name),["prevent"])},[d(a(e.name)+" ",1),t("span",null,"("+a(e.posts_count)+")",1)],8,R)]))),128))])])])])])]),_:1})}const ct=D(M,[["render",W],["__scopeId","data-v-9df50574"]]);export{ct as default};
