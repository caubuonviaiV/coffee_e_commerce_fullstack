import{L as w,u as x}from"./Index-BfhsCJ__.js";import{m as g,E as f,o as c,c as Q,w as S,f as s,b as t,F as V,G as q,t as a,i as b,B as k,e as D,d as i,a as T,g as v}from"./app-Bm5g5IQi.js";import{E as M}from"./ErrorMessage-Ca5XFEdV.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D8ehHb0j.js";/* empty css            */const E={name:"Cart",components:{Layout:w,ErrorMessage:M},setup(){const e=x(),d=g(""),u=g(""),o=g(""),C=(n,l)=>{e.updateQuantity(n,l)},p=n=>{const l=e.cart.find(y=>y.id===n);l&&e.updateQuantity(n,l.quantity+1)},_=n=>{const l=e.cart.find(y=>y.id===n);l&&l.quantity>1&&e.updateQuantity(n,l.quantity-1)},m=n=>{e.removeFromCart(n)},h=()=>{u.value="",e.applyDiscount(d.value).then(()=>{o.value=""}).catch(n=>{o.value=n.response.data.error})};return e.loadDiscount(),{cartStore:e,discountCode:d,discountError:u,updateQuantity:C,incrementQuantity:p,decrementQuantity:_,removeFromCart:m,applyDiscountCode:h,formatCurrency:n=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(n),errorMessage:o}}},F={key:0},B={class:"bg_gray",style:{"margin-top":"5em"}},G={class:"container margin_60_40"},L={class:"table table-striped cart-list"},U=t("thead",null,[t("tr",null,[t("th",null,"Sản phẩm"),t("th",null,"Giá"),t("th",null,"Số lượng"),t("th",null,"Tổng phụ"),t("th")])],-1),P={class:"thumb_cart"},j=["src"],z={class:"item_cart"},X={class:"numbers-row"},A=["onUpdate:modelValue","onChange"],H=["onClick"],I=["onClick"],J={class:"options"},K=["onClick"],O=t("i",{class:"ti-trash"},null,-1),R={class:"row add_top_30 flex-sm-row-reverse cart_actions"},W={class:"col-sm-12"},Y={class:"apply-coupon"},Z={class:"form-group form-inline"},$={class:"box_cart"},tt={class:"container"},ot={class:"row justify-content-end"},nt={class:"col-xl-4 col-lg-4 col-md-6"},rt=t("span",null,"Tổng phụ",-1),et={key:0},ct=t("li",null,[t("span",null,"Phí vận chuyển"),i(" 15.000đ")],-1),at={key:1},st=t("span",null,"Giảm",-1),it={key:2},lt=t("span",null,"Giảm",-1),dt={key:3},ut=t("span",null,"Tổng",-1),_t={key:4},mt=t("span",null,"Tổng",-1),ht={key:1},yt=t("h2",{class:"mt-12"},"Giỏ hàng trống",-1),gt=[yt];function ft(e,d,u,o,C,p){const _=f("ErrorMessage"),m=f("router-link"),h=f("Layout");return c(),Q(h,null,{content:S(()=>[o.cartStore.cart.length>0?(c(),s("div",F,[t("div",B,[t("div",G,[t("table",L,[U,t("tbody",null,[(c(!0),s(V,null,q(o.cartStore.cart,r=>(c(),s("tr",{key:r.id},[t("td",null,[t("div",P,[t("img",{src:r.image,class:"lazy",alt:"Image"},null,8,j)]),t("span",z,a(r.name),1)]),t("td",null,[t("strong",null,a(o.formatCurrency(r.price)),1)]),t("td",null,[t("div",X,[b(t("input",{type:"number","onUpdate:modelValue":n=>r.quantity=n,onChange:n=>o.updateQuantity(r.id,r.quantity),class:"qty2"},null,40,A),[[k,r.quantity,void 0,{number:!0}]]),t("div",{class:"inc button_inc",onClick:n=>o.incrementQuantity(r.id)}," + ",8,H),t("div",{class:"dec button_inc",onClick:n=>o.decrementQuantity(r.id)}," - ",8,I)])]),t("td",null,[t("strong",null,a(o.formatCurrency(r.price*r.quantity)),1)]),t("td",J,[t("a",{href:"#",onClick:D(n=>o.removeFromCart(r.id),["prevent"])},[O,i(" Xoá")],8,K)])]))),128))])]),t("div",R,[t("div",W,[t("div",Y,[t("div",Z,[b(t("input",{type:"text",name:"coupon-code",value:"",placeholder:"Nhập mã gỉam giá",class:"form-control d-inline",style:{width:"200px"},"onUpdate:modelValue":d[0]||(d[0]=r=>o.discountCode=r)},null,512),[[k,o.discountCode]]),t("button",{type:"button",class:"btn_1 outline",onClick:d[1]||(d[1]=(...r)=>o.applyDiscountCode&&o.applyDiscountCode(...r))}," Áp dụng ")]),T(_,{message:o.errorMessage},null,8,["message"])])])])])]),t("div",$,[t("div",tt,[t("div",ot,[t("div",nt,[t("ul",null,[t("li",null,[rt,i(" "+a(o.formatCurrency(o.cartStore.cartTotal)),1)]),o.cartStore.discount?(c(),s("li",et,[t("span",null,"Mã giảm gía:("+a(o.cartStore.discount.name)+")",1),i(" -"+a(o.cartStore.discount.condition===1?o.formatCurrency(o.cartStore.discount.number):`${o.cartStore.discount.number}%`),1)])):v("",!0),ct,o.cartStore.discount&&o.cartStore.discount.condition===1?(c(),s("li",at,[st,i(" - "+a(o.formatCurrency(o.cartStore.cartTotal-o.cartStore.discount.number)),1)])):v("",!0),o.cartStore.discount&&o.cartStore.discount.condition===2?(c(),s("li",it,[lt,i(" - "+a(o.formatCurrency(o.cartStore.cartTotal*o.cartStore.discount.number/100)),1)])):v("",!0),o.cartStore.discount?(c(),s("li",dt,[ut,i(" "+a(o.cartStore.discount.condition===1?o.formatCurrency(o.cartStore.cartTotal-o.cartStore.discount.number+15e3):o.formatCurrency(o.cartStore.cartTotal*o.cartStore.discount.number/100+15e3)),1)])):(c(),s("li",_t,[mt,i(" "+a(o.formatCurrency(o.cartStore.cartTotal+15e3)),1)]))]),T(m,{to:"checkout",class:"btn_1 full-width cart"},{default:S(()=>[i(" Thanh toán ")]),_:1})])])])])])):(c(),s("div",ht,gt))]),_:1})}const Tt=N(E,[["render",ft]]);export{Tt as default};
